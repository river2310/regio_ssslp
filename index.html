import React, { useState, useMemo, useEffect, useRef } from 'react';
import { 
  Search, 
  MapPin, 
  Users, 
  RefreshCw, 
  AlertCircle, 
  Hospital, 
  List, 
  Map as MapIcon, 
  Activity, 
  Globe, 
  X,
  ChevronRight,
  Database,
  ClipboardList,
  ShieldCheck,
  Stethoscope,
  LayoutDashboard,
  Hash,
  Fingerprint
} from 'lucide-react';

/**
 * CONFIGURACIÓN INSTITUCIONAL - VISITANDO CORAZONES
 * Sincronización en tiempo real con Catálogo Regionalizado
 */
const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQTyXeda4MphOJX65C0n5DYQamD0JqUtLIJJio7qDV_yZk6t5PQV04LSrRHoZv1udCCNPsufqw2vIZi/pub?gid=0&single=true&output=csv';
const LOGO_URL = 'https://d3dac9gdq8t83x.cloudfront.net/media/static/images/hor-verde.png';
const FAVICON_URL = 'https://d3dac9gdq8t83x.cloudfront.net/media/static/images/favicons/logo-verde.png';

// Paleta de colores basada en el logo verde oficial
const COLORS = {
  primary: '#1b4332',    // Verde Bosque Profundo
  secondary: '#2d6a4f',  // Verde Medio Institucional
  accent: '#c89e3a',     // Dorado de Prestigio
  background: '#fcfdfc', // Blanco Hueso
  border: '#e8f5e9'      // Verde Tenue para bordes
};

const App = () => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [filterType, setFilterType] = useState('LOCALIDAD');
  const [selectedRecord, setSelectedRecord] = useState(null);
  const searchContainerRef = useRef(null);

  // 1. Configuración de Identidad Visual del Navegador
  useEffect(() => {
    const link = document.querySelector("link[rel~='icon']") || document.createElement('link');
    link.type = 'image/png';
    link.rel = 'shortcut icon';
    link.href = FAVICON_URL;
    document.getElementsByTagName('head')[0].appendChild(link);
    document.title = "Regionalización | Visitando Corazones";
  }, []);

  // 2. Carga Inicial de Datos desde Google Sheets
  useEffect(() => {
    fetchData();
  }, []);

  // 3. Reset de estados al alternar filtros
  useEffect(() => {
    setSelectedRecord(null);
    setSearchTerm('');
  }, [filterType]);

  const fetchData = async () => {
    setLoading(true);
    setError(null);
    try {
      const response = await fetch(CSV_URL);
      if (!response.ok) throw new Error('Error al conectar con el servidor de datos regionales');
      const text = await response.text();
      parseCSV(text);
    } catch (err) {
      setError("No se pudo establecer conexión con el catálogo de Regionalización Operativa.");
      setLoading(false);
    }
  };

  const parseCSV = (text) => {
    try {
      const lines = text.split(/\r?\n/);
      if (lines.length < 2) return;
      
      // Limpieza de cabeceras para eliminar caracteres invisibles (BOM)
      const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, '').replace(/^\uFEFF/, ''));
      const result = [];

      for (let i = 1; i < lines.length; i++) {
        if (!lines[i].trim()) continue;
        const obj = {};
        const currentline = lines[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
        headers.forEach((header, index) => {
          let value = currentline[index] ? currentline[index].replace(/"/g, '').trim() : '';
          obj[header] = value;
        });
        result.push(obj);
      }
      setData(result);
      setLoading(false);
    } catch (err) {
      setError("Error crítico en la estructura del archivo de datos regional.");
      setLoading(false);
    }
  };

  // Normalización de texto para búsqueda insensible a acentos
  const normalizeText = (text) => 
    text ? text.toString().toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^a-z0-9 ]/g, "") : "";

  // Procesamiento y Agrupación de Resultados
  const processedResults = useMemo(() => {
    if (data.length === 0) return [];
    const lowerSearch = normalizeText(searchTerm);

    if (filterType === 'LOCALIDAD') {
      const groupedLoc = {};
      data.forEach(item => {
        const locName = item['NOMBRE LOC'] || item['NOMBRE_LOC'] || '';
        if (!lowerSearch || normalizeText(locName).includes(lowerSearch)) {
          const munName = item['NOMBRE MUN'] || item['NOMBRE_MUN'] || item['NOMBRE MUNICIPIO'] || 'N/A';
          const unit = item.UNIDAD || 'N/A';
          const key = normalizeText(`${locName}-${munName}-${unit}`);
          
          if (!groupedLoc[key]) {
            groupedLoc[key] = {
              type: 'INDIVIDUAL_LOC',
              title: locName,
              municipio_display: munName,
              UNIDAD: unit,
              CLUES: item.CLUES,
              CVE_CORTA_INST: item.CVE_CORTA_INST,
              jur: item.JUR,
              jurName: item.JUR_NOMBRE || item.NOMBRE, 
              cve_geo: item.cve_geo,
              pob_total: 0, pob_s_derecho: 0, pob_imss: 0, pob_issste: 0, pob_bien: 0
            };
          }
          groupedLoc[key].pob_total += Number(item.pob_total) || 0;
          groupedLoc[key].pob_s_derecho += Number(item.pob_s_derecho) || 0;
          groupedLoc[key].pob_imss += Number(item.pob_imss) || 0;
          groupedLoc[key].pob_issste += Number(item.pob_issste) || 0;
          groupedLoc[key].pob_bien += (Number(item.pob_bien) || 0) + (Number(item.pob_imss_bien) || 0);
        }
      });
      return Object.values(groupedLoc).slice(0, 50);
    }

    if (filterType === 'MUNICIPIO') {
      const groupedMun = {};
      data.forEach(item => {
        const munName = item['NOMBRE MUN'] || item['NOMBRE_MUN'] || item['NOMBRE MUNICIPIO'] || '';
        if (!lowerSearch || normalizeText(munName).includes(lowerSearch)) {
          const key = normalizeText(munName);
          if (!groupedMun[key]) {
            groupedMun[key] = {
              type: 'GROUPED_MUN',
              title: munName,
              NOMBRE_MUNICIPIO: munName,
              jur: item.JUR,
              jurName: item.JUR_NOMBRE || item.NOMBRE,
              cve_mun: item.CVE_MUN_ATIENDE,
              unidades: new Set(), 
              pob_total: 0, pob_s_derecho: 0, pob_imss: 0, pob_issste: 0, pob_bien: 0
            };
          }
          if (item.UNIDAD) {
            const unitLabel = `${item.UNIDAD} [${item.CLUES || 'S/C'}]`;
            groupedMun[key].unidades.add(unitLabel);
          }
          groupedMun[key].pob_total += Number(item.pob_total) || 0;
          groupedMun[key].pob_s_derecho += Number(item.pob_s_derecho) || 0;
          groupedMun[key].pob_imss += Number(item.pob_imss) || 0;
          groupedMun[key].pob_issste += Number(item.pob_issste) || 0;
          groupedMun[key].pob_bien += (Number(item.pob_bien) || 0) + (Number(item.pob_imss_bien) || 0);
        }
      });
      return Object.values(groupedMun).slice(0, 50);
    }

    return [];
  }, [data, searchTerm, filterType]);

  const stats = useMemo(() => {
    if (data.length === 0) return null;
    return {
      municipios: new Set(data.map(d => d['NOMBRE MUN'] || d['NOMBRE_MUN']).filter(Boolean)).size,
      pobTotal: data.reduce((acc, curr) => acc + (Number(curr.pob_total) || 0), 0)
    };
  }, [data]);

  return (
    <div className="min-h-screen bg-[#fcfdfc] text-[#1b1c1b] font-sans selection:bg-emerald-100 selection:text-emerald-900">
      {/* HEADER DE SISTEMA */}
      <header className="bg-[#1b4332] text-white shadow-xl border-b-4 border-[#c89e3a] sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-6 py-3 flex flex-col md:flex-row justify-between items-center gap-4">
          <div className="flex items-center gap-6">
            <div className="bg-white p-2 rounded-xl shadow-inner transform hover:scale-105 transition-transform duration-300">
              <img src={LOGO_URL} alt="Visitando Corazones Logo" className="h-12 w-auto object-contain" />
            </div>
            <div>
              <h1 className="text-xl md:text-2xl font-black tracking-tight uppercase leading-none">
                Regionalización Operativa
              </h1>
              <div className="flex items-center gap-2 mt-1">
                <span className="h-1.5 w-1.5 rounded-full bg-[#95d5b2] animate-pulse"></span>
                <p className="text-[10px] font-bold uppercase tracking-[0.2em] text-[#d8f3dc]">
                  Sistema de consulta
                </p>
              </div>
            </div>
          </div>
          
          <div className="flex items-center gap-3">
            <button 
              onClick={fetchData} 
              className="p-2.5 bg-[#2d6a4f] hover:bg-[#40916c] rounded-xl transition-all border border-white/10 shadow-md active:scale-95"
              title="Refrescar catálogo regional"
            >
              <RefreshCw size={18} className={`${loading ? 'animate-spin' : ''}`} />
            </button>
            <div className="h-8 w-[1px] bg-white/10 mx-1"></div>
            <div className="bg-white/10 px-4 py-2 rounded-xl flex items-center gap-3 border border-white/5 shadow-sm">
                <LayoutDashboard size={16} className="text-[#c89e3a]" />
                <span className="text-[10px] font-black uppercase tracking-widest leading-none text-white/80">ver. 21.10.2025</span>
            </div>
          </div>
        </div>
      </header>

      <main className="max-w-7xl mx-auto p-4 md:p-8 space-y-8">
        {!loading && !error && (
          <>
            {/* INDICADORES OPERATIVOS */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <IndicatorCard 
                label="Municipios en Red" 
                value={stats?.municipios} 
                icon={<Globe size={24} />} 
                color="bg-[#1b4332]" 
              />
              <IndicatorCard 
                label="Población Bajo Cobertura" 
                value={stats?.pobTotal.toLocaleString()} 
                icon={<Users size={24} />} 
                color="bg-[#2d6a4f]" 
              />
            </div>

            {/* BÚSQUEDA TÉCNICA */}
            <div className="bg-white p-5 rounded-[2.5rem] shadow-xl border border-slate-100 flex flex-col md:flex-row gap-5 items-center">
              <div className="relative flex-1 w-full">
                <Search className="absolute left-6 top-1/2 -translate-y-1/2 text-slate-300" size={22} />
                <input 
                  type="text"
                  placeholder={`Consultar ${filterType.toLowerCase()}...`}
                  className="w-full pl-14 pr-12 py-4 rounded-[1.5rem] border-2 border-slate-50 bg-[#f9fafb] focus:bg-white focus:ring-4 focus:ring-[#d8f3dc] focus:border-[#2d6a4f] outline-none transition-all font-bold uppercase text-slate-700 placeholder:normal-case placeholder:font-medium placeholder:text-slate-400"
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                />
                {searchTerm && (
                  <button onClick={() => setSearchTerm('')} className="absolute right-6 top-1/2 -translate-y-1/2 text-slate-300 hover:text-[#1b4332]">
                    <X size={20} />
                  </button>
                )}
              </div>
              
              <div className="flex bg-[#f1f8e9] p-1.5 rounded-[1.8rem] w-full md:w-auto border border-[#d8f3dc]">
                {['LOCALIDAD', 'MUNICIPIO'].map((type) => (
                  <button
                    key={type}
                    onClick={() => setFilterType(type)}
                    className={`flex-1 md:flex-none px-10 py-3 rounded-[1.3rem] text-[10px] font-black transition-all uppercase tracking-widest ${
                      filterType === type 
                        ? 'bg-white text-[#1b4332] shadow-md border border-[#e8f5e9]' 
                        : 'text-slate-500 hover:text-[#1b4332]'
                    }`}
                  >
                    {type}
                  </button>
                ))}
              </div>
            </div>

            {/* LISTADO Y FICHA OPERATIVA */}
            <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
              <div className="lg:col-span-7 space-y-5">
                <div className="flex items-center gap-3 px-3 text-[#1b4332]">
                  <List size={18} />
                  <h3 className="font-black uppercase text-[10px] tracking-[0.2em]">Listado Operativo ({processedResults.length})</h3>
                </div>
                
                <div className="grid gap-4 max-h-[700px] overflow-y-auto pr-3 custom-scrollbar">
                  {processedResults.map((item, idx) => (
                    <div 
                      key={idx}
                      onClick={() => setSelectedRecord(item)}
                      className={`group p-6 rounded-[2rem] border-2 transition-all cursor-pointer relative overflow-hidden ${
                        selectedRecord === item 
                        ? 'bg-[#f1f8e9] border-[#1b4332] shadow-md' 
                        : 'bg-white border-transparent shadow-sm hover:border-[#c89e3a] hover:shadow-lg'
                      }`}
                    >
                      <div className="flex justify-between items-center gap-6">
                        <div className="flex-1">
                          <div className="flex flex-wrap items-center gap-2 mb-2">
                            <span className="text-[9px] font-black bg-[#1b4332] text-white px-3 py-0.5 rounded-full uppercase tracking-tighter">
                              {filterType}
                            </span>
                            <span className="text-[9px] font-black text-[#c89e3a] uppercase tracking-widest bg-slate-50 px-2 py-0.5 rounded-md border border-slate-100">
                              JUR {item.jur}: {item.jurName}
                            </span>
                            {filterType === 'LOCALIDAD' && item.cve_geo && (
                              <span className="text-[9px] font-black text-emerald-600 uppercase tracking-widest bg-emerald-50 px-2 py-0.5 rounded-md border border-emerald-100">
                                GEO: {item.cve_geo}
                              </span>
                            )}
                            {filterType === 'MUNICIPIO' && item.cve_mun && (
                              <span className="text-[9px] font-black text-blue-600 uppercase tracking-widest bg-blue-50 px-2 py-0.5 rounded-md border border-blue-100">
                                CLAVE MUN: {item.cve_mun}
                              </span>
                            )}
                          </div>
                          <h4 className="font-black text-[#2d3436] text-xl leading-tight uppercase group-hover:text-[#1b4332] transition-colors">
                            {item.title}
                          </h4>
                          <p className="text-xs text-slate-400 font-bold uppercase tracking-tight flex items-center gap-2 mt-1">
                            <MapPin size={14} className="text-[#c89e3a]" />
                            {item.type === 'INDIVIDUAL_LOC' ? (
                              <span className="truncate">{item.municipio_display} <span className="text-slate-200 mx-1">|</span> {item.UNIDAD}</span>
                            ) : (
                              'Concentrado Territorial Municipal'
                            )}
                          </p>
                        </div>
                        <div className="text-right pl-6 border-l border-[#e8f5e9]">
                          <p className="text-[9px] font-black text-slate-300 uppercase tracking-widest mb-0.5">Población</p>
                          <p className="text-2xl font-black text-[#1b4332] tracking-tighter leading-none">{item.pob_total.toLocaleString()}</p>
                        </div>
                      </div>
                    </div>
                  ))}
                  {processedResults.length === 0 && (
                    <div className="p-12 text-center bg-white rounded-3xl border border-dashed border-slate-200">
                      <p className="text-slate-400 font-bold uppercase tracking-widest text-sm italic">Sin registros coincidentes. Intente con otro nombre.</p>
                    </div>
                  )}
                </div>
              </div>

              {/* PANEL LATERAL DE FICHA TÉCNICA */}
              <div className="lg:col-span-5">
                <div className="sticky top-[100px]">
                  {selectedRecord ? (
                    <div className="bg-white rounded-[2.5rem] shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-right duration-500">
                      <div className="bg-gradient-to-br from-[#1b4332] to-[#2d6a4f] p-10 text-white relative">
                        <div className="absolute top-0 right-0 p-4 opacity-10 filter brightness-200">
                           <img src={FAVICON_URL} alt="" className="h-32 w-auto" />
                        </div>
                        <div className="flex items-center gap-2 mb-4">
                          <ShieldCheck size={18} className="text-[#c89e3a]" />
                          <span className="text-[10px] font-black uppercase tracking-[0.3em] text-[#d8f3dc]">Ficha Operativa</span>
                        </div>
                        <h4 className="font-black text-3xl leading-tight uppercase mb-8 text-balance">
                           {selectedRecord.title}
                        </h4>
                        
                        <div className="space-y-4 pt-6 border-t border-white/10">
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div className="flex items-start gap-3 bg-white/5 p-3 rounded-xl border border-white/5">
                              <MapIconLucide size={16} className="text-amber-300 mt-0.5" />
                              <div>
                                <p className="text-[8px] font-black text-amber-200 uppercase tracking-widest">Jurisdicción Sanitaria</p>
                                <p className="text-[10px] font-bold uppercase">{selectedRecord.jur} - {selectedRecord.jurName}</p>
                              </div>
                            </div>
                            {(selectedRecord.cve_geo || selectedRecord.cve_mun) && (
                              <div className="flex items-start gap-3 bg-white/5 p-3 rounded-xl border border-white/5">
                                <Fingerprint size={16} className="text-emerald-300 mt-0.5" />
                                <div>
                                  <p className="text-[8px] font-black text-emerald-200 uppercase tracking-widest">
                                    {selectedRecord.type === 'INDIVIDUAL_LOC' ? 'Clave Geoestadística' : 'Clave de Municipio'}
                                  </p>
                                  <p className="text-[10px] font-mono font-bold tracking-widest">
                                    {selectedRecord.type === 'INDIVIDUAL_LOC' ? selectedRecord.cve_geo : selectedRecord.cve_mun}
                                  </p>
                                </div>
                              </div>
                            )}
                          </div>

                          {selectedRecord.UNIDAD && (
                            <div className="flex items-start gap-3 bg-white/5 p-3 rounded-xl border border-white/5">
                              <Hospital size={16} className="text-[#c89e3a] mt-0.5" />
                              <div>
                                <p className="text-[8px] font-black text-[#d8f3dc] uppercase tracking-widest">Unidad Médica</p>
                                <p className="text-[11px] font-bold uppercase">{selectedRecord.UNIDAD}</p>
                              </div>
                            </div>
                          )}
                        </div>
                      </div>
                      
                      <div className="p-10 space-y-10 max-h-[450px] overflow-y-auto custom-scrollbar bg-[#fcfdfc]">
                        {selectedRecord.type === 'GROUPED_MUN' && (
                          <section>
                            <h5 className="text-[10px] font-black text-[#1b4332] uppercase tracking-[0.2em] mb-5 flex items-center gap-3">
                              <Stethoscope size={16} className="text-[#c89e3a]" /> Infraestructura ({selectedRecord.unidades.size} Unidades)
                            </h5>
                            <div className="grid gap-3">
                              {Array.from(selectedRecord.unidades).map((u, i) => {
                                const parts = u.match(/(.*) \[(.*)\]/);
                                if (parts) {
                                  return (
                                    <div key={i} className="bg-white p-4 rounded-xl border border-slate-100 shadow-sm hover:border-[#1b4332] transition-colors group/unit">
                                      <p className="text-[10px] font-black text-slate-700 uppercase leading-tight mb-1 group-hover/unit:text-[#1b4332]">{parts[1]}</p>
                                      <div className="flex items-center gap-1 text-[9px] font-bold text-slate-400 uppercase tracking-tighter">
                                        <Hash size={10} className="text-[#c89e3a]" />
                                        <span>CLUES: {parts[2]}</span>
                                      </div>
                                    </div>
                                  );
                                }
                                return (
                                  <div key={i} className="bg-white p-4 rounded-xl border border-slate-100 text-[10px] font-black text-slate-600 uppercase shadow-sm">
                                    {u}
                                  </div>
                                );
                              })}
                            </div>
                          </section>
                        )}

                        <section>
                          <h5 className="text-[10px] font-black text-[#1b4332] uppercase tracking-[0.2em] mb-6 flex items-center gap-3">
                            <Activity size={16} className="text-[#c89e3a]" /> Perfil de Cobertura
                          </h5>
                          <div className="space-y-6">
                            <div className="bg-[#1b4332] p-6 rounded-[1.5rem] text-white shadow-xl">
                               <p className="text-[9px] font-black uppercase tracking-widest opacity-60 mb-1">Habitantes Nominales</p>
                               <p className="text-4xl font-black tracking-tighter">{Number(selectedRecord.pob_total).toLocaleString()}</p>
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                              <MetricBox label="Sin Derecho" value={selectedRecord.pob_s_derecho} color="text-slate-500" />
                              <MetricBox label="IMSS" value={selectedRecord.pob_imss} color="text-[#2d6a4f]" />
                              <MetricBox label="ISSSTE" value={selectedRecord.pob_issste} color="text-[#1a3a5f]" />
                              {/* Cambio solicitado: Otros Apoyos -> Otra derechohabiencia */}
                              <MetricBox label="Otra derechohabiencia" value={selectedRecord.pob_bien} color="text-[#c89e3a]" />
                            </div>
                          </div>
                        </section>
                      </div>
                      
                      <div className="p-6 bg-slate-50 text-center border-t border-slate-100">
                        <p className="text-[9px] font-black text-slate-300 uppercase tracking-[0.3em]">Visitando Corazones • Catálogo Operativo 2026</p>
                      </div>
                    </div>
                  ) : (
                    <div className="bg-white rounded-[3rem] p-16 border-4 border-dashed border-[#e8f5e9] text-center flex flex-col items-center justify-center min-h-[500px]">
                      <div className="bg-[#f1f8e9] p-10 rounded-full mb-8 group shadow-inner">
                        <img src={FAVICON_URL} alt="Visitando Corazones Favicon" className="h-20 w-auto opacity-40 grayscale group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500" />
                      </div>
                      <h4 className="text-[#1b4332] font-black text-xl mb-3 uppercase tracking-widest leading-none">Exploración Regional</h4>
                      <p className="text-slate-400 text-[10px] font-bold leading-relaxed max-w-[240px] mx-auto uppercase tracking-widest opacity-60 italic text-balance">
                        Seleccione un registro del catálogo para visualizar el perfil demográfico operativo y jurisdiccional.
                      </p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </>
        )}

        {/* ESTADO DE CARGA */}
        {loading && (
          <div className="flex flex-col items-center justify-center py-48 gap-8">
            <img src={FAVICON_URL} alt="Cargando..." className="h-20 w-auto animate-bounce" />
            <p className="font-black text-[#1b4332] uppercase tracking-[0.4em] text-xl animate-pulse">Regionalización</p>
            <p className="text-slate-400 font-bold uppercase tracking-widest text-[10px]">Actualizando datos territoriales...</p>
          </div>
        )}
      </main>
      
      <style>{`
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #d8f3dc; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #1b4332; }
        
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slide-right { from { transform: translateX(30px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        .animate-in { animation-duration: 0.6s; animation-fill-mode: both; }
        .slide-in-from-right { animation-name: slide-right; }
      `}</style>
    </div>
  );
};

/**
 * COMPONENTES DE PRESENTACIÓN
 */
const IndicatorCard = ({ label, value, icon, color }) => (
  <div className="bg-white p-8 rounded-[2.5rem] shadow-lg border border-slate-50 flex items-center gap-6 transition-all hover:shadow-2xl hover:-translate-y-1 border-b-[6px] border-transparent hover:border-[#c89e3a] group">
    <div className={`${color} p-5 rounded-2xl text-white shadow-lg transform group-hover:rotate-6 transition-transform duration-500`}>
      {icon}
    </div>
    <div>
      <p className="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-1 leading-none">{label}</p>
      <p className="text-3xl font-black text-[#1a1a1a] tracking-tighter">{value || '0'}</p>
    </div>
  </div>
);

const MetricBox = ({ label, value, color }) => (
  <div className="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:border-[#c89e3a] transition-all">
    <p className="text-[8px] font-black text-slate-400 uppercase mb-2 tracking-widest leading-none">{label}</p>
    <p className={`text-xl font-black ${color} tracking-tighter leading-none`}>
      {Number(value || 0).toLocaleString()}
    </p>
  </div>
);

export default App;
